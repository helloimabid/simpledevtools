<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-M2JM5FC3');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Free JSON to XML and XML to JSON converter online. Convert data formats instantly with proper formatting. 100% client-side processing - your data never leaves your browser.">
    <meta name="keywords"
        content="json to xml, xml to json, json converter, xml converter, convert json to xml online, convert xml to json online, json to xml converter free, xml parser, json xml tool, data converter">
    <meta name="robots" content="index, follow">
    <meta name="author" content="SimpleDevTools">
    <meta name="google-adsense-account" content="ca-pub-9710571190649081">
    <title>JSON to XML Converter & XML to JSON - Free Online Tool | SimpleDevTools</title>
    <link rel="canonical" href="https://simpledevtools.tech/json-xml-converter" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="JSON to XML Converter & XML to JSON - Free Online Tool">
    <meta property="og:description"
        content="Convert between JSON and XML formats instantly. Free online converter with formatting.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://simpledevtools.tech/json-xml-converter">
    <meta property="og:site_name" content="SimpleDevTools">
    <meta property="og:image" content="https://simpledevtools.tech/og-image.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="JSON to XML & XML to JSON Converter">
    <meta name="twitter:description"
        content="Free online JSON to XML and XML to JSON converter. Instant conversion, no upload.">
    <meta name="twitter:image" content="https://simpledevtools.tech/og-image.png">

    <!-- Structured Data - SoftwareApplication -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "JSON XML Converter",
      "alternateName": ["JSON to XML Converter", "XML to JSON Converter", "JSON XML Tool"],
      "description": "Free online tool to convert JSON to XML and XML to JSON. Features proper formatting, attribute handling, and instant conversion.",
      "url": "https://simpledevtools.tech/json-xml-converter",
      "applicationCategory": "DeveloperApplication",
      "applicationSubCategory": "Data Converter",
      "operatingSystem": "Any",
      "browserRequirements": "Requires JavaScript",
      "softwareVersion": "1.0",
      "featureList": [
        "JSON to XML conversion",
        "XML to JSON conversion",
        "Proper XML formatting",
        "Attribute handling",
        "Array to XML mapping",
        "File upload and download",
        "Copy to clipboard",
        "100% client-side processing"
      ],
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "SimpleDevTools",
        "url": "https://simpledevtools.tech"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "ratingCount": "589"
      }
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://simpledevtools.tech/"},
        {"@type": "ListItem", "position": 2, "name": "Tools", "item": "https://simpledevtools.tech/tools"},
        {"@type": "ListItem", "position": 3, "name": "JSON XML Converter", "item": "https://simpledevtools.tech/json-xml-converter"}
      ]
    }
    </script>

    <!-- Structured Data - FAQPage -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "How do I convert JSON to XML?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Paste your JSON data into the input box, select 'JSON to XML' mode, and click Convert. The tool will transform your JSON structure into properly formatted XML with appropriate element tags."
          }
        },
        {
          "@type": "Question",
          "name": "How are JSON arrays converted to XML?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "JSON arrays are converted to repeated XML elements with the same tag name. For example, an array of items becomes multiple <item> tags within a parent element."
          }
        },
        {
          "@type": "Question",
          "name": "Does the converter handle XML attributes?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes! When converting XML to JSON, attributes are preserved with an @ prefix. When converting JSON to XML, keys starting with @ are converted back to XML attributes."
          }
        }
      ]
    }
    </script>

    <script src="https://analytics.ahrefs.com/analytics.js" data-key="Hsz4y6HoB+jznDcQTkjyfg" async></script>

    <link rel="preload" href="/fonts/fonts.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="/fonts/fonts.css">
    </noscript>
    <link rel="stylesheet" href="./dist/output.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <script src="./dist/js/lucide.min.js"></script>

    <style>
        .mode-btn {
            transition: all 0.2s ease;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border-color: transparent;
        }

        textarea {
            font-family: 'JetBrains Mono', ui-monospace, monospace;
        }
    </style>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9710571190649081"
        crossorigin="anonymous"></script>
</head>

<body
    class="flex flex-col min-h-screen transition-colors duration-300 bg-white dark:bg-black text-neutral-900 dark:text-neutral-100">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M2JM5FC3" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>

    <div class="fixed inset-0 z-0 pointer-events-none bg-grid opacity-60"></div>
    <div
        class="fixed top-0 left-1/2 -translate-x-1/2 w-150 h-75 bg-violet-500/10 dark:bg-violet-500/20 blur-3xl rounded-full pointer-events-none z-0">
    </div>

    <main class="relative z-10 px-4 pb-20 grow pt-28 sm:px-6">
        <div class="max-w-6xl mx-auto">

            <!-- Header -->
            <div class="max-w-2xl mx-auto mb-10 text-center">
                <div
                    class="inline-flex items-center gap-2 px-3 py-1 mb-6 font-mono text-xs font-medium border rounded-full bg-gradient-to-r from-orange-50 to-violet-50 dark:from-orange-900/20 dark:to-violet-900/20 border-orange-200 dark:border-orange-800">
                    <i data-lucide="repeat" class="w-3 h-3 text-orange-500"></i>
                    <span class="text-neutral-600 dark:text-neutral-400">Bidirectional Conversion</span>
                </div>
                <h1
                    class="mb-4 text-4xl font-semibold tracking-tight font-display sm:text-5xl text-neutral-900 dark:text-white">
                    JSON ↔ XML Converter
                </h1>
                <p class="text-lg leading-relaxed text-neutral-500 dark:text-neutral-400">
                    Convert JSON to XML or XML to JSON instantly. Handles nested structures, arrays, and attributes.
                </p>
            </div>

            <!-- Mode Toggle -->
            <div class="flex justify-center gap-2 mb-6">
                <button id="json-to-xml-btn"
                    class="mode-btn active px-5 py-2.5 text-sm font-medium border rounded-lg border-neutral-300 dark:border-neutral-600">
                    JSON → XML
                </button>
                <button id="xml-to-json-btn"
                    class="mode-btn px-5 py-2.5 text-sm font-medium border rounded-lg border-neutral-300 dark:border-neutral-600">
                    XML → JSON
                </button>
            </div>

            <!-- Main Tool -->
            <div
                class="mb-8 overflow-hidden bg-white border shadow-lg dark:bg-neutral-900 border-neutral-200 dark:border-neutral-800 rounded-2xl">
                <div class="grid lg:grid-cols-2">
                    <!-- Input -->
                    <div class="p-6 border-b lg:border-b-0 lg:border-r border-neutral-200 dark:border-neutral-800">
                        <div class="flex items-center justify-between mb-3">
                            <label id="input-label"
                                class="flex items-center gap-2 text-sm font-medium text-neutral-700 dark:text-neutral-300">
                                <i data-lucide="braces" class="w-4 h-4 text-yellow-500"></i>
                                JSON Input
                            </label>
                            <div class="flex gap-2">
                                <label
                                    class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium border rounded-lg cursor-pointer text-neutral-600 dark:text-neutral-400 border-neutral-300 dark:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                                    <i data-lucide="upload" class="w-3 h-3"></i>
                                    Upload
                                    <input type="file" id="file-input" accept=".json,.xml,.txt" class="hidden">
                                </label>
                                <button id="sample-btn"
                                    class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium border rounded-lg text-neutral-600 dark:text-neutral-400 border-neutral-300 dark:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                                    <i data-lucide="file-text" class="w-3 h-3"></i>
                                    Sample
                                </button>
                            </div>
                        </div>
                        <textarea id="input-area"
                            class="w-full h-80 p-4 text-sm border rounded-lg resize-none bg-neutral-50 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700 focus:ring-2 focus:ring-violet-500 focus:border-transparent"
                            placeholder='{
  "bookstore": {
    "book": [
      {
        "title": "Harry Potter",
        "author": "J.K. Rowling",
        "year": 1997
      },
      {
        "title": "Lord of the Rings",
        "author": "J.R.R. Tolkien",
        "year": 1954
      }
    ]
  }
}'></textarea>
                    </div>

                    <!-- Output -->
                    <div class="p-6">
                        <div class="flex items-center justify-between mb-3">
                            <label id="output-label"
                                class="flex items-center gap-2 text-sm font-medium text-neutral-700 dark:text-neutral-300">
                                <i data-lucide="file-code" class="w-4 h-4 text-orange-500"></i>
                                XML Output
                            </label>
                            <div class="flex gap-2">
                                <button id="copy-btn"
                                    class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium border rounded-lg text-neutral-600 dark:text-neutral-400 border-neutral-300 dark:border-neutral-600 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                                    <i data-lucide="copy" class="w-3 h-3"></i>
                                    Copy
                                </button>
                                <button id="download-btn"
                                    class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-white rounded-lg bg-gradient-to-r from-orange-600 to-violet-600 hover:from-orange-700 hover:to-violet-700">
                                    <i data-lucide="download" class="w-3 h-3"></i>
                                    Download
                                </button>
                            </div>
                        </div>
                        <textarea id="output-area"
                            class="w-full h-80 p-4 text-sm border rounded-lg resize-none bg-neutral-50 dark:bg-neutral-800 border-neutral-200 dark:border-neutral-700"
                            readonly placeholder="Converted output will appear here..."></textarea>
                    </div>
                </div>

                <!-- Settings & Convert -->
                <div
                    class="flex flex-wrap items-center justify-between gap-4 p-4 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-800/50">
                    <div class="flex flex-wrap items-center gap-4">
                        <div class="flex items-center gap-2">
                            <label class="text-xs font-medium text-neutral-500">Root Element:</label>
                            <input type="text" id="root-element" value="root"
                                class="px-3 py-1.5 text-xs border rounded-lg w-24 bg-white dark:bg-neutral-800 border-neutral-300 dark:border-neutral-600">
                        </div>
                        <label
                            class="flex items-center gap-2 text-xs cursor-pointer text-neutral-600 dark:text-neutral-400">
                            <input type="checkbox" id="pretty-print" checked class="rounded accent-violet-600">
                            Pretty print
                        </label>
                    </div>
                    <button id="convert-btn"
                        class="flex items-center gap-2 px-6 py-2.5 text-sm font-medium text-white rounded-lg bg-gradient-to-r from-orange-600 to-violet-600 hover:from-orange-700 hover:to-violet-700">
                        <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                        Convert
                    </button>
                </div>

                <!-- Error Message -->
                <div id="error-message"
                    class="hidden p-4 text-sm text-red-600 border-t bg-red-50 dark:bg-red-900/20 dark:text-red-400 border-neutral-200 dark:border-neutral-800">
                    <div class="flex items-center gap-2">
                        <i data-lucide="alert-circle" class="w-4 h-4"></i>
                        <span id="error-text"></span>
                    </div>
                </div>
            </div>

            <!-- Features -->
            <div class="grid gap-4 mb-16 md:grid-cols-3">
                <div
                    class="p-5 border rounded-xl border-neutral-200 dark:border-neutral-800 bg-white/50 dark:bg-neutral-900/50">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="p-2 rounded-lg bg-orange-100 dark:bg-orange-900/30">
                            <i data-lucide="layers" class="w-5 h-5 text-orange-600 dark:text-orange-400"></i>
                        </div>
                        <h3 class="font-semibold text-neutral-900 dark:text-white">Nested Support</h3>
                    </div>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">Handles deeply nested structures. Objects
                        become elements, arrays become repeated elements.</p>
                </div>
                <div
                    class="p-5 border rounded-xl border-neutral-200 dark:border-neutral-800 bg-white/50 dark:bg-neutral-900/50">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="p-2 rounded-lg bg-violet-100 dark:bg-violet-900/30">
                            <i data-lucide="at-sign" class="w-5 h-5 text-violet-600 dark:text-violet-400"></i>
                        </div>
                        <h3 class="font-semibold text-neutral-900 dark:text-white">Attribute Handling</h3>
                    </div>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">XML attributes are converted to @-prefixed
                        keys in JSON and vice versa.</p>
                </div>
                <div
                    class="p-5 border rounded-xl border-neutral-200 dark:border-neutral-800 bg-white/50 dark:bg-neutral-900/50">
                    <div class="flex items-center gap-3 mb-3">
                        <div class="p-2 rounded-lg bg-green-100 dark:bg-green-900/30">
                            <i data-lucide="shield-check" class="w-5 h-5 text-green-600 dark:text-green-400"></i>
                        </div>
                        <h3 class="font-semibold text-neutral-900 dark:text-white">100% Private</h3>
                    </div>
                    <p class="text-sm text-neutral-600 dark:text-neutral-400">All conversion happens in your browser.
                        Your data never leaves your device.</p>
                </div>
            </div>

            <!-- SEO Content -->
            <div class="max-w-3xl mx-auto space-y-12">
                <section>
                    <h2
                        class="flex items-center gap-3 mb-4 text-xl font-medium font-display text-neutral-900 dark:text-white">
                        <div class="p-1.5 rounded-md bg-neutral-100 dark:bg-neutral-800">
                            <i data-lucide="info" class="w-4 h-4 text-neutral-600 dark:text-neutral-400"></i>
                        </div>
                        JSON vs XML: When to Use Each
                    </h2>
                    <div class="space-y-4 text-sm text-neutral-600 dark:text-neutral-400">
                        <div class="grid gap-4 md:grid-cols-2">
                            <div
                                class="p-4 border rounded-lg border-yellow-200 dark:border-yellow-800 bg-yellow-50/50 dark:bg-yellow-900/10">
                                <h3 class="mb-2 font-semibold text-yellow-700 dark:text-yellow-300">JSON</h3>
                                <ul class="space-y-1 list-disc list-inside text-xs">
                                    <li>Lightweight and fast to parse</li>
                                    <li>Native JavaScript support</li>
                                    <li>Ideal for web APIs</li>
                                    <li>No comments supported</li>
                                    <li>Limited data types</li>
                                </ul>
                            </div>
                            <div
                                class="p-4 border rounded-lg border-orange-200 dark:border-orange-800 bg-orange-50/50 dark:bg-orange-900/10">
                                <h3 class="mb-2 font-semibold text-orange-700 dark:text-orange-300">XML</h3>
                                <ul class="space-y-1 list-disc list-inside text-xs">
                                    <li>Supports attributes and namespaces</li>
                                    <li>Self-describing with schemas</li>
                                    <li>Better for document markup</li>
                                    <li>Supports comments</li>
                                    <li>More verbose</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <section>
                    <h2
                        class="flex items-center gap-3 mb-4 text-xl font-medium font-display text-neutral-900 dark:text-white">
                        <div class="p-1.5 rounded-md bg-neutral-100 dark:bg-neutral-800">
                            <i data-lucide="code" class="w-4 h-4 text-neutral-600 dark:text-neutral-400"></i>
                        </div>
                        Conversion Examples
                    </h2>
                    <div
                        class="p-4 space-y-4 text-sm border rounded-lg text-neutral-600 dark:text-neutral-400 border-neutral-200 dark:border-neutral-700 bg-neutral-50 dark:bg-neutral-800/50">
                        <div>
                            <p class="mb-2 font-semibold">JSON Array → XML:</p>
                            <pre
                                class="p-3 overflow-x-auto text-xs rounded bg-neutral-100 dark:bg-neutral-900"><code>{"items": [1, 2, 3]}</code></pre>
                            <p class="my-2 text-center">↓</p>
                            <pre class="p-3 overflow-x-auto text-xs rounded bg-neutral-100 dark:bg-neutral-900"><code>&lt;items&gt;
  &lt;item&gt;1&lt;/item&gt;
  &lt;item&gt;2&lt;/item&gt;
  &lt;item&gt;3&lt;/item&gt;
&lt;/items&gt;</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Related Tools -->
                <section>
                    <h2
                        class="flex items-center gap-3 mb-4 text-xl font-medium font-display text-neutral-900 dark:text-white">
                        <div class="p-1.5 rounded-md bg-neutral-100 dark:bg-neutral-800">
                            <i data-lucide="grid-3x3" class="w-4 h-4 text-neutral-600 dark:text-neutral-400"></i>
                        </div>
                        Related Tools
                    </h2>
                    <div class="grid gap-4 sm:grid-cols-2">
                        <a href="/json-formatter"
                            class="flex items-center gap-3 p-4 border rounded-lg border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                            <div class="p-2 rounded-lg bg-yellow-100 dark:bg-yellow-900/30">
                                <i data-lucide="braces" class="w-5 h-5 text-yellow-600 dark:text-yellow-400"></i>
                            </div>
                            <div>
                                <div class="font-medium text-neutral-900 dark:text-white">JSON Formatter</div>
                                <div class="text-xs text-neutral-500">Format and validate JSON</div>
                            </div>
                        </a>
                        <a href="/json-csv-converter"
                            class="flex items-center gap-3 p-4 border rounded-lg border-neutral-200 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                            <div class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900/30">
                                <i data-lucide="table" class="w-5 h-5 text-blue-600 dark:text-blue-400"></i>
                            </div>
                            <div>
                                <div class="font-medium text-neutral-900 dark:text-white">JSON ↔ CSV Converter</div>
                                <div class="text-xs text-neutral-500">Convert between JSON and CSV</div>
                            </div>
                        </a>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script src="layout.js"></script>
    <script>
        lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });

        const inputArea = document.getElementById('input-area');
        const outputArea = document.getElementById('output-area');
        const jsonToXmlBtn = document.getElementById('json-to-xml-btn');
        const xmlToJsonBtn = document.getElementById('xml-to-json-btn');
        const convertBtn = document.getElementById('convert-btn');
        const copyBtn = document.getElementById('copy-btn');
        const downloadBtn = document.getElementById('download-btn');
        const sampleBtn = document.getElementById('sample-btn');
        const fileInput = document.getElementById('file-input');
        const rootElement = document.getElementById('root-element');
        const prettyPrint = document.getElementById('pretty-print');
        const inputLabel = document.getElementById('input-label');
        const outputLabel = document.getElementById('output-label');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        let mode = 'json-to-xml';

        const sampleJson = `{
  "bookstore": {
    "book": [
      {
        "@category": "fiction",
        "title": "Harry Potter",
        "author": "J.K. Rowling",
        "year": 1997,
        "price": 29.99
      },
      {
        "@category": "fiction",
        "title": "Lord of the Rings",
        "author": "J.R.R. Tolkien",
        "year": 1954,
        "price": 39.99
      }
    ]
  }
}`;

        const sampleXml = `<?xml version="1.0" encoding="UTF-8"?>
<bookstore>
  <book category="fiction">
    <title>Harry Potter</title>
    <author>J.K. Rowling</author>
    <year>1997</year>
    <price>29.99</price>
  </book>
  <book category="fiction">
    <title>Lord of the Rings</title>
    <author>J.R.R. Tolkien</author>
    <year>1954</year>
    <price>39.99</price>
  </book>
</bookstore>`;

        // Mode toggle
        jsonToXmlBtn.addEventListener('click', () => {
            mode = 'json-to-xml';
            jsonToXmlBtn.classList.add('active');
            xmlToJsonBtn.classList.remove('active');
            inputLabel.innerHTML = '<i data-lucide="braces" class="w-4 h-4 text-yellow-500"></i> JSON Input';
            outputLabel.innerHTML = '<i data-lucide="file-code" class="w-4 h-4 text-orange-500"></i> XML Output';
            lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        });

        xmlToJsonBtn.addEventListener('click', () => {
            mode = 'xml-to-json';
            xmlToJsonBtn.classList.add('active');
            jsonToXmlBtn.classList.remove('active');
            inputLabel.innerHTML = '<i data-lucide="file-code" class="w-4 h-4 text-orange-500"></i> XML Input';
            outputLabel.innerHTML = '<i data-lucide="braces" class="w-4 h-4 text-yellow-500"></i> JSON Output';
            lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        });

        // Sample data
        sampleBtn.addEventListener('click', () => {
            inputArea.value = mode === 'json-to-xml' ? sampleJson : sampleXml;
        });

        // Convert
        convertBtn.addEventListener('click', convert);

        function convert() {
            hideError();
            const input = inputArea.value.trim();
            if (!input) {
                showError('Please enter some data to convert.');
                return;
            }

            try {
                if (mode === 'json-to-xml') {
                    const json = JSON.parse(input);
                    outputArea.value = jsonToXml(json, rootElement.value, prettyPrint.checked);
                } else {
                    outputArea.value = xmlToJson(input, prettyPrint.checked);
                }
            } catch (e) {
                showError(e.message);
            }
        }

        function jsonToXml(obj, rootName, pretty, indent = 0) {
            const spaces = pretty ? '  '.repeat(indent) : '';
            const newline = pretty ? '\n' : '';
            let xml = '';

            if (indent === 0) {
                xml = `<?xml version="1.0" encoding="UTF-8"?>${newline}`;
            }

            function processValue(key, value, ind) {
                const sp = pretty ? '  '.repeat(ind) : '';

                if (value === null || value === undefined) {
                    return `${sp}<${key}/>${newline}`;
                }

                if (Array.isArray(value)) {
                    return value.map(item => processValue(key, item, ind)).join('');
                }

                if (typeof value === 'object') {
                    let attrs = '';
                    let content = '';

                    for (const [k, v] of Object.entries(value)) {
                        if (k.startsWith('@')) {
                            attrs += ` ${k.slice(1)}="${escapeXml(String(v))}"`;
                        } else if (k === '#text') {
                            content = escapeXml(String(v));
                        } else {
                            content += processValue(k, v, ind + 1);
                        }
                    }

                    if (content.includes('<')) {
                        return `${sp}<${key}${attrs}>${newline}${content}${sp}</${key}>${newline}`;
                    } else if (content) {
                        return `${sp}<${key}${attrs}>${content}</${key}>${newline}`;
                    } else {
                        return `${sp}<${key}${attrs}/>${newline}`;
                    }
                }

                return `${sp}<${key}>${escapeXml(String(value))}</${key}>${newline}`;
            }

            // Handle root
            if (typeof obj === 'object' && !Array.isArray(obj)) {
                const keys = Object.keys(obj);
                if (keys.length === 1 && typeof obj[keys[0]] === 'object') {
                    // Use first key as root
                    xml += processValue(keys[0], obj[keys[0]], 0);
                } else {
                    xml += `<${rootName}>${newline}`;
                    for (const [k, v] of Object.entries(obj)) {
                        xml += processValue(k, v, 1);
                    }
                    xml += `</${rootName}>${newline}`;
                }
            } else {
                xml += `<${rootName}>${newline}`;
                xml += processValue('item', obj, 1);
                xml += `</${rootName}>${newline}`;
            }

            return xml;
        }

        function escapeXml(str) {
            return str
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&apos;');
        }

        function xmlToJson(xml, pretty) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(xml, 'text/xml');

            const errorNode = doc.querySelector('parsererror');
            if (errorNode) {
                throw new Error('Invalid XML: ' + errorNode.textContent);
            }

            function parseNode(node) {
                const obj = {};

                // Handle attributes
                if (node.attributes) {
                    for (const attr of node.attributes) {
                        obj['@' + attr.name] = attr.value;
                    }
                }

                // Handle children
                const children = Array.from(node.childNodes).filter(n => n.nodeType === 1 || (n.nodeType === 3 && n.textContent.trim()));

                if (children.length === 0) {
                    return Object.keys(obj).length > 0 ? obj : '';
                }

                if (children.length === 1 && children[0].nodeType === 3) {
                    const text = children[0].textContent.trim();
                    if (Object.keys(obj).length > 0) {
                        obj['#text'] = text;
                        return obj;
                    }
                    // Try to parse as number or boolean
                    if (text === 'true') return true;
                    if (text === 'false') return false;
                    if (!isNaN(text) && text !== '') return Number(text);
                    return text;
                }

                for (const child of children) {
                    if (child.nodeType === 3) continue;

                    const name = child.nodeName;
                    const value = parseNode(child);

                    if (obj[name] !== undefined) {
                        if (!Array.isArray(obj[name])) {
                            obj[name] = [obj[name]];
                        }
                        obj[name].push(value);
                    } else {
                        obj[name] = value;
                    }
                }

                return Object.keys(obj).length > 0 ? obj : '';
            }

            const result = {};
            result[doc.documentElement.nodeName] = parseNode(doc.documentElement);

            return JSON.stringify(result, null, pretty ? 2 : 0);
        }

        function showError(msg) {
            errorText.textContent = msg;
            errorMessage.classList.remove('hidden');
            lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
        }

        function hideError() {
            errorMessage.classList.add('hidden');
        }

        // Copy
        copyBtn.addEventListener('click', () => {
            navigator.clipboard.writeText(outputArea.value);
            copyBtn.innerHTML = '<i data-lucide="check" class="w-3 h-3"></i> Copied!';
            lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
            setTimeout(() => {
                copyBtn.innerHTML = '<i data-lucide="copy" class="w-3 h-3"></i> Copy';
                lucide.createIcons({ attrs: { 'stroke-width': 1.5 } });
            }, 2000);
        });

        // Download
        downloadBtn.addEventListener('click', () => {
            const output = outputArea.value;
            if (!output) return;
            const ext = mode === 'json-to-xml' ? 'xml' : 'json';
            const mime = mode === 'json-to-xml' ? 'application/xml' : 'application/json';
            const blob = new Blob([output], { type: mime });
            const link = document.createElement('a');
            link.download = `converted.${ext}`;
            link.href = URL.createObjectURL(blob);
            link.click();
        });

        // File upload
        fileInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                inputArea.value = e.target.result;
            };
            reader.readAsText(file);
        });
    </script>
</body>

</html>